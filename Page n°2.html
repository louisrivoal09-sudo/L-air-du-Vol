<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>L'air du vol¬Æ/ Aviation civile/ Cr√©er un article</title>
  <link rel="stylesheet" href="Page 1.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>
  <link rel="icon" href="logo.png" type="image/png">
</head>
<body>

  <!-- Barre du haut -->
  <header class="topbar">
    <div class="logo-site">
      <button id="toggle-sidebar" class="sidebar-toggle">‚ò∞</button>
      <img src="logo.png" alt="Logo" class="logo-img">
      <span class="site-name">L'Air du vol¬Æ</span>
    </div>
    <button id="toggle-theme">üåô Mode Sombre</button>
  </header>

  <!-- Menu lat√©ral vertical -->
  <nav class="sidebar">
    <ul class="menu">
      <li><a href="index.html">Accueil üè†</a></li>
      <li class="has-submenu">
        <a href="#">Articles üì∞</a>
        <ul class="sous-menu">
          <li><a href="Page n¬∞1.html">D√©couvrir les articles üìö</a></li>
          <li><a href="Page n¬∞2.html">Cr√©er un article (authentification requise) üîè</a></li>
        </ul>
     <li class="has-submenu">
        <a href="#">M√©dias üíª</a>
        <ul class="sous-menu">
          <li><a href="Page n¬∞3.html">Vid√©os üé•</a></li>
          <li><a href="Page n¬∞4.html">Podcasts üéôÔ∏è</a></li>
          <li><a href="Page n¬∞5.html">Jeux üéÆ</a></li>
        </ul>
      </li>
      <ul class="menu">
      <li><a href="Page n¬∞6.html">Liens üîó</a></li>
      <li class="has-submenu">
        <a href="#">A propos ‚ûï</a>
        <ul class="sous-menu">
                    <li><a href="Page n¬∞7.html">Avis ‚≠ê</a></li>
          <li><a href="#section1">Conditions g√©n√©rales d'utilisation ‚ö†Ô∏è</a></li>
        </ul>
      </li>
    </ul>
    <!-- Publicit√© sidebar   -->
<div class="sidebar-ad">
  <p>PUBLICIT√â</p>
  <a href="https://www.picard.fr" target="_blank">
    <img src="https://www.picard.fr/on/demandware.static/-/Sites-picard-Library/default/dw53e8a5b3/brandcontent/1464x270px_BANNIERE_HEADER_SNACK_MOBILE.jpg" alt="Picard">
  </a>
</div>

<div class="sidebar-ad">
  <p>PUBLICIT√â</p>
  <a href="https://www.apple.com" target="_blank">
    <img src="https://www.vivelapub.fr/wp-content/uploads/miniatures/apple3.jpg" alt="Apple">
  </a>
</div>
  </nav>


  <!-- Modal d'authentification -->
  <div id="auth-modal">
    <div class="auth-content">
      <h2>Authentification requise</h2>
      <input type="text" id="username" placeholder="Nom">
      <input type="password" id="code" placeholder="Code">
      <button onclick="checkAuth()">Valider</button>
      <div class="error" id="error-msg"></div>
    </div>
  </div>

  <!-- Contenu principal -->
  <main class="main-content">
    <!-- Hero section -->
    <div class="articles-hero">
      <h1>üîè Cr√©er un article</h1>
      <p>Cr√©ez un article en 3 th√®mes avec sous partie A et B ! Vous pouvez √©galement uploader des images.</p>
    </div>
    
    <div class="split-container">
      <!-- Colonne formulaire √† gauche -->
      <div class="form-column">
        <h2>Formulaire de cr√©ation</h2>
        
        <div class="form-group">
          <label for="article-title">Titre de l'article</label>
          <input type="text" id="article-title" placeholder="Entrez le titre de votre article">
        </div>
        
        <div class="form-group">
          <label for="article-date">Date de publication</label>
          <input type="date" id="article-date">
        </div>
        
        <div class="form-group">
          <label for="article-resume">R√©sum√© de l'article</label>
          <textarea id="article-resume" placeholder="R√©digez un r√©sum√© de votre article"></textarea>
        </div>
        
        <div class="form-group">
          <label for="theme1">Th√®me 1 (premi√®re partie)</label>
          <input type="text" id="theme1" placeholder="Nom du premier th√®me">
        </div>
        
        <div class="form-group">
          <label for="grand-a1">Grand A (1√®re partie)</label>
          <input type="text" id="grand-a1" placeholder="Titre de la section A">
        </div>
        
        <div class="form-group">
          <label for="text-a1">Texte li√© au Grand A</label>
          <textarea id="text-a1" placeholder="Contenu de la section A"></textarea>
        </div>
        
        <div class="form-group">
          <label for="grand-b1">Grand B (1√®re partie)</label>
          <input type="text" id="grand-b1" placeholder="Titre de la section B">
        </div>
        
        <div class="form-group">
          <label for="text-b1">Texte li√© au Grand B</label>
          <textarea id="text-b1" placeholder="Contenu de la section B"></textarea>
        </div>
        
        <div class="form-group">
          <label for="theme2">Th√®me 2 (deuxi√®me partie)</label>
          <input type="text" id="theme2" placeholder="Nom du deuxi√®me th√®me">
        </div>
        
        <div class="form-group">
          <label for="grand-a2">Grand A (2√®me partie)</label>
          <input type="text" id="grand-a2" placeholder="Titre de la section A">
        </div>
        
        <div class="form-group">
          <label for="text-a2">Texte li√© au Grand A (2√®me partie)</label>
          <textarea id="text-a2" placeholder="Contenu de la section A"></textarea>
        </div>
        
        <div class="form-group">
          <label for="grand-b2">Grand B (2√®me partie)</label>
          <input type="text" id="grand-b2" placeholder="Titre de la section B">
        </div>
        
        <div class="form-group">
          <label for="text-b2">Texte li√© au Grand B (2√®me partie)</label>
          <textarea id="text-b2" placeholder="Contenu de la section B"></textarea>
        </div>
        
        <div class="form-group">
          <label for="theme3">Th√®me 3 (troisi√®me partie)</label>
          <input type="text" id="theme3" placeholder="Nom du troisi√®me th√®me">
        </div>
        
        <div class="form-group">
          <label for="grand-a3">Grand A (3√®me partie)</label>
          <input type="text" id="grand-a3" placeholder="Titre de la section A">
        </div>
        
        <div class="form-group">
          <label for="text-a3">Texte li√© au Grand A (3√®me partie)</label>
          <textarea id="text-a3" placeholder="Contenu de la section A"></textarea>
        </div>
        
        <div class="form-group">
          <label for="grand-b3">Grand B (3√®me partie)</label>
          <input type="text" id="grand-b3" placeholder="Titre de la section B">
        </div>
        
        <div class="form-group">
          <label for="text-b3">Texte li√© au Grand B (3√®me partie)</label>
          <textarea id="text-b3" placeholder="Contenu de la section B"></textarea>
        </div>
        
        <div class="form-group">
          <label for="conclusion-title">Titre de la conclusion</label>
          <input type="text" id="conclusion-title" placeholder="Titre de votre conclusion">
        </div>
        
        <div class="form-group">
          <label for="conclusion-text">Texte de la conclusion</label>
          <textarea id="conclusion-text" placeholder="R√©digez votre conclusion"></textarea>
        </div>
        
        <div class="form-group">
          <label>Images de l'article</label>
          <div class="image-upload" onclick="document.getElementById('article-images').click()">
            <input type="file" id="article-images" multiple accept="image/*">
            <p>üì∑ Cliquez ici pour ajouter des images</p>
            <p style="font-size: 0.9rem; color: #666;">Formats accept√©s: JPG, PNG, GIF (s√©lection multiple possible)</p>
          </div>
          <div class="image-preview" id="image-preview"></div>
          <button type="button" class="btn" style="margin-top: 10px; background: #28a745;" onclick="document.getElementById('additional-images').click()">+ Ajouter d'autres images</button>
          <input type="file" id="additional-images" multiple accept="image/*" style="display: none;">
        </div>
        
        <button type="button" class="btn" onclick="publishArticle()">Publier l'article</button>
      </div>
      
      <!-- Colonne aper√ßu √† droite -->
      <div class="preview-column">
        <h2>Aper√ßu de l'article</h2>
        
        <div id="preview-content">
          <div class="preview-title" id="preview-title">Titre de votre article</div>
          <div class="preview-date" id="preview-date">Date de publication</div>
          
          <div class="preview-resume" id="preview-resume"></div>
          
          <h3 class="preview-theme" id="preview-theme1" style="display: none;"></h3>
          <div class="preview-section-title" id="preview-grand-a1" style="display: none;"></div>
          <p class="preview-text" id="preview-text-a1"></p>
          <div class="preview-section-title" id="preview-grand-b1" style="display: none;"></div>
          <p class="preview-text" id="preview-text-b1"></p>
          
          <h3 class="preview-theme" id="preview-theme2" style="display: none;"></h3>
          <div class="preview-section-title" id="preview-grand-a2" style="display: none;"></div>
          <p class="preview-text" id="preview-text-a2"></p>
          <div class="preview-section-title" id="preview-grand-b2" style="display: none;"></div>
          <p class="preview-text" id="preview-text-b2"></p>
          
          <h3 class="preview-theme" id="preview-theme3" style="display: none;"></h3>
          <div class="preview-section-title" id="preview-grand-a3" style="display: none;"></div>
          <p class="preview-text" id="preview-text-a3"></p>
          <div class="preview-section-title" id="preview-grand-b3" style="display: none;"></div>
          <p class="preview-text" id="preview-text-b3"></p>
          
          <h3 class="preview-conclusion-title" id="preview-conclusion-title" style="display: none;"></h3>
          <p class="preview-conclusion-text" id="preview-conclusion-text"></p>
          
          <div class="preview-images" id="preview-images"></div>
        </div>
      </div>
    </div>
    <div class="form-group">
  <label for="unsplash-search">Rechercher une image sur Unsplash</label>
  <input type="text" id="unsplash-search" placeholder="Tapez un mot-cl√© et appuyez sur Entr√©e">
  <div id="unsplash-results" class="image-preview" style="display:flex; flex-wrap:wrap; margin-top:10px;"></div>
</div>
 </main>
<script>
  
const unsplashInput = document.getElementById('unsplash-search');
const unsplashResults = document.getElementById('unsplash-results');

// Ta cl√© API Unsplash
const UNSPLASH_ACCESS_KEY = '6BMOMscVWSbZIEuf_CuEoNIvQepRY0i4jO83J9UMCR4';

unsplashInput.addEventListener('keypress', async (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    const query = unsplashInput.value.trim();
    if (!query) return;

    unsplashResults.innerHTML = 'Recherche en cours...';

    try {
      const res = await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=12&client_id=${UNSPLASH_ACCESS_KEY}`);
      const data = await res.json();
      unsplashResults.innerHTML = '';

      data.results.forEach(img => {
        const imgElem = document.createElement('img');
        imgElem.src = img.urls.small;
        imgElem.alt = img.alt_description || 'Image Unsplash';
        imgElem.style.width = '100px';
        imgElem.style.height = '100px';
        imgElem.style.objectFit = 'cover';
        imgElem.style.margin = '5px';
        imgElem.style.cursor = 'pointer';

        // Ajouter l'image √† l'aper√ßu principal
        imgElem.addEventListener('click', () => {
          const preview = document.getElementById('preview-images');
          const newImg = document.createElement('img');
          newImg.src = img.urls.small;
          newImg.alt = img.alt_description || 'Image';
          newImg.style.width = '150px';
          newImg.style.height = '150px';
          newImg.style.objectFit = 'cover';
          newImg.style.margin = '5px';
          preview.appendChild(newImg);

          // Ajouter aussi dans les miniatures du formulaire
          const imagePreview = document.getElementById('image-preview');
          const imgContainer = document.createElement('div');
          imgContainer.className = 'image-item';
          imgContainer.innerHTML = `<img src="${img.urls.small}" alt="${img.alt_description || 'Image'}">`;
          imagePreview.appendChild(imgContainer);
        });

        unsplashResults.appendChild(imgElem);
      });

    } catch (err) {
      unsplashResults.innerHTML = 'Erreur lors de la recherche';
      console.error(err);
    }
  }
});
</script>

  <footer class="footer">
    <div class="footer-content" id="section1">
      <h3>Conditions G√©n√©rales d'Utilisation</h3>
      <p>En acc√©dant au site <strong>L'Air du vol</strong>, vous acceptez nos conditions g√©n√©rales d'utilisation. Toute reproduction ou diffusion du contenu est interdite sans autorisation.</p>
      <p>&copy; 2025 - L'Air du vol. Tous droits r√©serv√©s.</p>
    </div>
  </footer>
  <!-- Bouton flottant -->
<button id="ai-chat-btn">‚ùî</button>

<!-- Fen√™tre de chat -->
<div id="ai-chat-modal">
  <div class="ai-chat-header">
    <h3>Assistant IA</h3>
    <button id="close-ai-chat">&times;</button>
  </div>
  <div class="ai-chat-messages" id="ai-chat-messages"></div>
  <div class="typing-indicator" id="typing-indicator">
    <div class="typing-dots"><span></span><span></span><span></span></div>
  </div>
  <div class="ai-chat-input">
    <textarea id="ai-input" placeholder="√âcrivez votre message..."></textarea>
    <button id="ai-send-btn">Envoyer</button>
  </div>
</div>
  <script>    
 const aiBtn = document.getElementById("ai-chat-btn");
const aiModal = document.getElementById("ai-chat-modal");
const aiClose = document.getElementById("close-ai-chat");
const aiMessages = document.querySelector(".ai-chat-messages");
const aiInput = document.getElementById("ai-input");
const aiSend = document.getElementById("ai-send-btn");

// OUVERTURE / FERMETURE DU CHAT
aiBtn.addEventListener("click", () => aiModal.classList.add("show"));
aiClose.addEventListener("click", () => aiModal.classList.remove("show"));

// ENVOI D'UN MESSAGE
aiSend.addEventListener("click", sendMessage);
aiInput.addEventListener("keydown", e => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

async function sendMessage() {
  const text = aiInput.value.trim();
  if (!text) return;

  // Ajouter message utilisateur
  addMessage(text, "user");
  aiInput.value = "";
  aiSend.disabled = true;

  // Indicateur de chargement
  const loading = addMessage("‚Ä¢ ‚Ä¢ ‚Ä¢", "ai");
  loading.classList.add("typing-indicator");

  // APPEL API IA
  const response = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer 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"
    },
    body: JSON.stringify({
      model: "gpt-4o-mini",
      messages: [{ role: "user", content: text }]
    })
  });

  const data = await response.json();

  // Supprimer l'indicateur
  loading.remove();

  // Afficher r√©ponse IA
  addMessage(data.choices[0].message.content, "ai");
  aiSend.disabled = false;
}

// AJOUTER UN MESSAGE DANS L‚ÄôUI
function addMessage(content, sender) {
  const div = document.createElement("div");
  div.className = "ai-message " + sender;
  div.textContent = content;
  aiMessages.appendChild(div);
  aiMessages.scrollTop = aiMessages.scrollHeight;
  return div;
}

  aiInput.addEventListener("keypress", e => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault();
      sendBtn.click();
    }
  });
</script>

  <script>
    // Script existant pour le th√®me et le menu
    const toggleButton = document.getElementById('toggle-theme');
    const sidebarToggleBtn = document.getElementById('toggle-sidebar');
    const sidebar = document.querySelector('.sidebar');
    const body = document.body;

    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark');
      toggleButton.textContent = '‚òÄÔ∏è Mode Clair';
    }

    toggleButton.addEventListener('click', () => {
      body.classList.toggle('dark');
      const isDark = body.classList.contains('dark');
      toggleButton.textContent = isDark ? '‚òÄÔ∏è Mode Clair' : 'üåô Mode Sombre';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    sidebarToggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
      body.classList.toggle('menu-collapsed');
    });

    function checkAuth() {
      const username = document.getElementById('username').value;
      const code = document.getElementById('code').value;
      const errorMsg = document.getElementById('error-msg');
      if (username === 'admin' && code === '1234') {
        document.body.classList.remove('locked');
        document.getElementById('auth-modal').style.display = 'none';
      } else {
        errorMsg.textContent = 'Nom ou code incorrect';
      }
    }

    // Nouveau script pour la mise √† jour dynamique
    function updatePreview() {
      console.log('updatePreview called'); // Debug
      
      // Titre
      const title = document.getElementById('article-title').value;
      const previewTitle = document.getElementById('preview-title');
      previewTitle.textContent = title || 'Titre de votre article';
      console.log('Titre:', title); // Debug
      
      // Date
      const date = document.getElementById('article-date').value;
      const previewDate = document.getElementById('preview-date');
      previewDate.textContent = date ? `Publi√© le ${new Date(date).toLocaleDateString('fr-FR')}` : 'Date de publication';
      
      // R√©sum√©
      const resume = document.getElementById('article-resume').value;
      const previewResume = document.getElementById('preview-resume');
      previewResume.textContent = resume || '';
      
      // Th√®me 1
      const theme1 = document.getElementById('theme1').value;
      const previewTheme1 = document.getElementById('preview-theme1');
      if (theme1.trim()) {
        previewTheme1.textContent = theme1;
        previewTheme1.style.display = 'block';
      } else {
        previewTheme1.style.display = 'none';
      }
      
      // Grand A1
      const grandA1 = document.getElementById('grand-a1').value;
      const previewGrandA1 = document.getElementById('preview-grand-a1');
      if (grandA1.trim()) {
        previewGrandA1.textContent = grandA1;
        previewGrandA1.style.display = 'block';
      } else {
        previewGrandA1.style.display = 'none';
      }
      
      // Texte A1
      const textA1 = document.getElementById('text-a1').value;
      const previewTextA1 = document.getElementById('preview-text-a1');
      previewTextA1.textContent = textA1 || '';
      
      // Grand B1
      const grandB1 = document.getElementById('grand-b1').value;
      const previewGrandB1 = document.getElementById('preview-grand-b1');
      if (grandB1.trim()) {
        previewGrandB1.textContent = grandB1;
        previewGrandB1.style.display = 'block';
      } else {
        previewGrandB1.style.display = 'none';
      }
      
      // Texte B1
      const textB1 = document.getElementById('text-b1').value;
      const previewTextB1 = document.getElementById('preview-text-b1');
      previewTextB1.textContent = textB1 || '';
      
      // Th√®me 2
      const theme2 = document.getElementById('theme2').value;
      const previewTheme2 = document.getElementById('preview-theme2');
      if (theme2.trim()) {
        previewTheme2.textContent = theme2;
        previewTheme2.style.display = 'block';
      } else {
        previewTheme2.style.display = 'none';
      }
      
      // Grand A2
      const grandA2 = document.getElementById('grand-a2').value;
      const previewGrandA2 = document.getElementById('preview-grand-a2');
      if (grandA2.trim()) {
        previewGrandA2.textContent = grandA2;
        previewGrandA2.style.display = 'block';
      } else {
        previewGrandA2.style.display = 'none';
      }
      
      // Texte A2
      const textA2 = document.getElementById('text-a2').value;
      const previewTextA2 = document.getElementById('preview-text-a2');
      previewTextA2.textContent = textA2 || '';
      
      // Grand B2
      const grandB2 = document.getElementById('grand-b2').value;
      const previewGrandB2 = document.getElementById('preview-grand-b2');
      if (grandB2.trim()) {
        previewGrandB2.textContent = grandB2;
        previewGrandB2.style.display = 'block';
      } else {
        previewGrandB2.style.display = 'none';
      }
      
      // Texte B2
      const textB2 = document.getElementById('text-b2').value;
      const previewTextB2 = document.getElementById('preview-text-b2');
      previewTextB2.textContent = textB2 || '';
      
      // Th√®me 3
      const theme3 = document.getElementById('theme3').value;
      const previewTheme3 = document.getElementById('preview-theme3');
      if (theme3.trim()) {
        previewTheme3.textContent = theme3;
        previewTheme3.style.display = 'block';
      } else {
        previewTheme3.style.display = 'none';
      }
      
      // Grand A3
      const grandA3 = document.getElementById('grand-a3').value;
      const previewGrandA3 = document.getElementById('preview-grand-a3');
      if (grandA3.trim()) {
        previewGrandA3.textContent = grandA3;
        previewGrandA3.style.display = 'block';
      } else {
        previewGrandA3.style.display = 'none';
      }
      
      // Texte A3
      const textA3 = document.getElementById('text-a3').value;
      const previewTextA3 = document.getElementById('preview-text-a3');
      previewTextA3.textContent = textA3 || '';
      
      // Grand B3
      const grandB3 = document.getElementById('grand-b3').value;
      const previewGrandB3 = document.getElementById('preview-grand-b3');
      if (grandB3.trim()) {
        previewGrandB3.textContent = grandB3;
        previewGrandB3.style.display = 'block';
      } else {
        previewGrandB3.style.display = 'none';
      }
      
      // Texte B3
      const textB3 = document.getElementById('text-b3').value;
      const previewTextB3 = document.getElementById('preview-text-b3');
      previewTextB3.textContent = textB3 || '';
      
      // Conclusion
      const conclusionTitle = document.getElementById('conclusion-title').value;
      const previewConclusionTitle = document.getElementById('preview-conclusion-title');
      if (conclusionTitle.trim()) {
        previewConclusionTitle.textContent = conclusionTitle;
        previewConclusionTitle.style.display = 'block';
      } else {
        previewConclusionTitle.style.display = 'none';
      }
      
      const conclusionText = document.getElementById('conclusion-text').value;
      const previewConclusionText = document.getElementById('preview-conclusion-text');
      previewConclusionText.textContent = conclusionText || '';
    }

    // √âcouter tous les changements dans les champs du formulaire
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded'); // Debug
      
      const formElements = [
        'article-title', 'article-date', 'article-resume', 'theme1', 'grand-a1', 'text-a1', 
        'grand-b1', 'text-b1', 'theme2', 'grand-a2', 'text-a2', 'grand-b2', 'text-b2',
        'theme3', 'grand-a3', 'text-a3', 'grand-b3', 'text-b3', 'conclusion-title', 'conclusion-text'
      ];
      
      formElements.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.addEventListener('input', function() {
            console.log('Input changed:', id); // Debug
            updatePreview();
          });
          element.addEventListener('change', function() {
            console.log('Change event:', id); // Debug
            updatePreview();
          });
        } else {
          console.log('Element not found:', id); // Debug
        }
      });
      
      // D√©finir la date d'aujourd'hui par d√©faut
      const dateInput = document.getElementById('article-date');
      if (dateInput) {
        dateInput.valueAsDate = new Date();
      }
      
      // Mise √† jour initiale
      updatePreview();
    });

    // Variable globale pour stocker toutes les images
    let allImages = [];

    // Gestion des images principales
    document.getElementById('article-images').addEventListener('change', function(event) {
      handleImageUpload(event.target.files, false);
    });

    // Gestion des images suppl√©mentaires
    document.getElementById('additional-images').addEventListener('change', function(event) {
      handleImageUpload(event.target.files, true);
    });

    function handleImageUpload(files, isAdditional) {
      const imagePreview = document.getElementById('image-preview');
      const previewImages = document.getElementById('preview-images');
      
      // Si ce ne sont pas des images suppl√©mentaires, on vide d'abord les aper√ßus
      if (!isAdditional) {
        allImages = [];
        imagePreview.innerHTML = '';
        previewImages.innerHTML = '';
      }
      
      Array.from(files).forEach((file, index) => {
        if (file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(e) {
            const imageData = {
              src: e.target.result,
              name: file.name,
              id: Date.now() + index
            };
            
            allImages.push(imageData);
            
            // Miniature dans le formulaire avec bouton supprimer
            const imgContainer = document.createElement('div');
            imgContainer.className = 'image-item';
            imgContainer.innerHTML = `
              <img src="${e.target.result}" alt="${file.name}">
              <button class="image-remove" onclick="removeImage(${imageData.id})" title="Supprimer">√ó</button>
            `;
            imagePreview.appendChild(imgContainer);
            
            // Image dans l'aper√ßu
            const previewImg = document.createElement('img');
            previewImg.src = e.target.result;
            previewImg.alt = file.name;
            previewImg.dataset.imageId = imageData.id;
            previewImages.appendChild(previewImg);
          };
          reader.readAsDataURL(file);
        }
      });
    }

    // Fonction pour supprimer une image
    function removeImage(imageId) {
      // Supprimer de la liste
      allImages = allImages.filter(img => img.id !== imageId);
      
      // Supprimer de l'aper√ßu formulaire
      const imagePreview = document.getElementById('image-preview');
      const imgToRemove = imagePreview.querySelector(`img[src="${allImages.find(img => img.id === imageId)?.src}"]`);
      if (imgToRemove) {
        imgToRemove.parentElement.remove();
      }
      
      // Supprimer de l'aper√ßu principal
      const previewImages = document.getElementById('preview-images');
      const previewImgToRemove = previewImages.querySelector(`img[data-image-id="${imageId}"]`);
      if (previewImgToRemove) {
        previewImgToRemove.remove();
      }
    }

    function publishArticle() {
      alert('Article publi√© avec succ√®s ! (Fonctionnalit√© √† impl√©menter c√¥t√© serveur)');
    }
    // Pr√©visualisation et suppression des images t√©l√©charg√©es
document.getElementById('article-images').addEventListener('change', handleImageUpload);
document.getElementById('additional-images').addEventListener('change', handleImageUpload);

function handleImageUpload(event) {
  const preview = document.getElementById('image-preview');
  preview.innerHTML = ''; // vide la preview avant nouvel ajout
  for (const file of event.target.files) {
    const reader = new FileReader();
    reader.onload = e => {
      const div = document.createElement('div');
      div.classList.add('image-item');
      div.innerHTML = `
        <img src="${e.target.result}" alt="${file.name}">
        <button class="image-remove" onclick="this.parentElement.remove()">√ó</button>
      `;
      preview.appendChild(div);
    };
    reader.readAsDataURL(file);
  }
}
  </script>
  
</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>L'air du vol¬Æ/ Accueil/ D√©couvrir nos articles</title>
  <link rel="stylesheet" href="Page 1.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
   <!-- ========================================
       TUTORIEL ONBOARDING (premi√®re visite)
       ======================================== -->
  <div id="tutorial-overlay">
    <div class="tutorial-card">
      <div class="tutorial-step active" data-step="1">
        <h2>üëã Bienvenue sur L'Air du Vol !</h2>
        <div class="tutorial-content">
          <p style="font-size: 1.125rem; line-height: 1.8; color: var(--text-gray);">
            D√©couvrez le premier portail francophone d√©di√© √† l'aviation civile, militaire et spatiale.
            Laissez-nous vous guider √† travers les fonctionnalit√©s principales.
          </p>
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">üì∞</div>
            <div>
              <strong>Articles approfondis</strong>
              <p>Explorez des centaines d'articles d√©taill√©s sur l'histoire de l'aviation</p>
            </div>
          </div>
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">üé•</div>
            <div>
              <strong>Contenus multim√©dias</strong>
              <p>Vid√©os, podcasts et simulations de vol</p>
            </div>
          </div>
        </div>
        <div class="tutorial-buttons">
          <button class="tutorial-btn primary" onclick="nextTutorialStep()">Suivant ‚Üí</button>
          <button class="tutorial-btn secondary" onclick="skipTutorial()">Passer</button>
        </div>
        <div class="tutorial-progress">
          <div class="tutorial-dot active"></div>
          <div class="tutorial-dot"></div>
          <div class="tutorial-dot"></div>
        </div>
      </div>

      <div class="tutorial-step" data-step="2">
        <h2>üé® Personnalisez votre exp√©rience</h2>
        <div class="tutorial-content">
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">üåô</div>
            <div>
              <strong>Mode sombre</strong>
              <p>Activez le mode sombre pour une lecture confortable, m√™me la nuit</p>
            </div>
          </div>
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">üì±</div>
            <div>
              <strong>Responsive</strong>
              <p>Profitez d'une exp√©rience optimale sur tous vos appareils</p>
            </div>
          </div>
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">üîç</div>
            <div>
              <strong>Recherche avanc√©e</strong>
              <p>Filtrez par cat√©gorie, date ou mots-cl√©s</p>
            </div>
          </div>
        </div>
        <div class="tutorial-buttons">
          <button class="tutorial-btn secondary" onclick="prevTutorialStep()">‚Üê Pr√©c√©dent</button>
          <button class="tutorial-btn primary" onclick="nextTutorialStep()">Suivant ‚Üí</button>
        </div>
        <div class="tutorial-progress">
          <div class="tutorial-dot"></div>
          <div class="tutorial-dot active"></div>
          <div class="tutorial-dot"></div>
        </div>
      </div>

      <div class="tutorial-step" data-step="3">
        <h2>üöÄ Pr√™t √† d√©coller !</h2>
        <div class="tutorial-content">
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">üì•</div>
            <div>
              <strong>T√©l√©chargement</strong>
              <p>Sauvegardez vos articles favoris en PDF</p>
            </div>
          </div>
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">üîó</div>
            <div>
              <strong>Partage</strong>
              <p>Partagez vos d√©couvertes sur les r√©seaux sociaux</p>
            </div>
          </div>
          <div class="tutorial-feature">
            <div class="tutorial-feature-icon">‚ùî</div>
            <div>
              <strong>Assistant IA</strong>
              <p>Posez vos questions √† notre assistant intelligent</p>
            </div>
          </div>
        </div>
        <div class="tutorial-buttons">
          <button class="tutorial-btn secondary" onclick="prevTutorialStep()">‚Üê Pr√©c√©dent</button>
          <button class="tutorial-btn primary" onclick="finishTutorial()">Commencer üéâ</button>
        </div>
        <div class="tutorial-progress">
          <div class="tutorial-dot"></div>
          <div class="tutorial-dot"></div>
          <div class="tutorial-dot active"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Barre du haut -->
  <header class="topbar">
    
      <button id="toggle-sidebar" class="sidebar-toggle">‚ò∞</button>
    <div class="logo-site">
      <img src="logo.png" alt="Logo" class="logo-img">
      <span class="site-name">L'Air du vol¬Æ</span>
    </div>  
    <button id="toggle-theme">üåô Mode Sombre</button>
  </header>

  <!-- Menu lat√©ral vertical -->
  <nav class="sidebar">
      <ul class="menu">

    <li>
      <a href="index.html">
        <span class="icon">üè†</span>
        <span class="label">Accueil</span>
      </a>
    </li>

    <li class="has-submenu">
      <a href="#">
        <span class="icon">üì∞</span>
        <span class="label">Articles</span>
      </a>
      <ul class="sous-menu">
        <li>
          <a href="Page n¬∞1.html">
            <span class="icon">üìö</span>
            <span class="label">D√©couvrir les articles</span>
          </a>
        </li>
        <li>
          <a href="Page n¬∞2.html">
            <span class="icon">üîè</span>
            <span class="label">Cr√©er un article</span>
          </a>
        </li>
      </ul>
    </li>

    <li class="has-submenu">
      <a href="#">
        <span class="icon">üíª</span>
        <span class="label">M√©dias</span>
      </a>
      <ul class="sous-menu">
        <li>
          <a href="Page n¬∞3.html">
            <span class="icon">üé•</span>
            <span class="label">Vid√©os</span>
          </a>
        </li>
        <li>
          <a href="Page n¬∞4.html">
            <span class="icon">üéôÔ∏è</span>
            <span class="label">Podcasts</span>
          </a>
        </li>
        <li>
          <a href="Page n¬∞5.html">
            <span class="icon">üéÆ</span>
            <span class="label">Jeux</span>
          </a>
        </li>
      </ul>
    </li>

    <li>f="Page n¬∞6.html">
        <spa
      <a hren class="icon">üîó</span>
        <span class="label">Liens</span>
      </a>
    </li>

    <li class="has-submenu">
      <a href="#">
        <span class="icon">‚ûï</span>
        <span class="label">√Ä propos</span>
      </a>
      <ul class="sous-menu">
        <li>
          <a href="Page n¬∞7.html">
            <span class="icon">‚≠ê</span>
            <span class="label">Avis</span>
          </a>
        </li>
        <li>
          <a href="#section1">
            <span class="icon">‚ö†Ô∏è</span>
            <span class="label">CGU</span>
          </a>
        </li>
      </ul>
    </li>

  </ul>
    <!-- Publicit√© sidebar   -->
<div class="sidebar-ad">
  <p>PUBLICIT√â</p>
  <a href="https://www.flightsimulator.com/" target="_blank">
    <img src="https://image.api.playstation.com/vulcan/ap/rnd/202509/1802/ed39778b97eafec593e5eea9cd762fab81976920c3e92720.jpg" alt="Pub microsoft flight simulator 2024">
  </a>
</div>

<div class="sidebar-ad">
  <p>PUBLICIT√â</p>
  <a href="https://www.avionslegendaires.net/encyclopedie/" target="_blank">
    <img src="https://www.avionslegendaires.net/wp-content/uploads/2023/05/logo-avionslegendaires-V9-couleur.png" alt="Site avion">
  </a>
</div>
  </nav>

  <!-- Contenu principal -->
  <main class="main-content">
    <section class="hero-section">
      <h1>Bienvenue dans l'univers de l'aviation</h1>
      <p>Explorez l'histoire fascinante de l'a√©ronautique √† travers nos articles, vid√©os et contenus exclusifs</p>
    </section>

    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="stat-card">
        <div class="stat-icon">‚úàÔ∏è</div>
        <div class="stat-number">250+</div>
        <div class="stat-label">Articles publi√©s</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üé•</div>
        <div class="stat-number">50+</div>
        <div class="stat-label">Vid√©os disponibles</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üéôÔ∏è</div>
        <div class="stat-number">30+</div>
        <div class="stat-label">√âpisodes de podcasts</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-number">10k+</div>
        <div class="stat-label">Lecteurs actifs</div>
      </div>
    </div>

<!-- Section D√©couverte des Pages -->
    <section class="content-section">
      <div class="section-header">
        <h2 class="section-title">D√©couvrez notre contenu</h2>
      </div>
      
      <div class="grid-modern">
        <!-- Carte Articles -->
        <a href="Page n¬∞1.html" class="page-card" style="text-decoration: none;">
          <div class="page-card-icon">üì∞</div>
          <h3 class="page-card-title">Articles</h3>
          <p class="page-card-description">Explorez notre collection d'articles approfondis sur l'aviation civile, militaire et spatiale. Plus de 250 articles disponibles.</p>
          <div class="page-card-footer">
            <span class="page-card-count">250+ articles</span>
            <span class="page-card-arrow">‚Üí</span>
          </div>
        </a>

        <!-- Carte Vid√©os -->
        <a href="Page n¬∞3.html" class="page-card" style="text-decoration: none;">
          <div class="page-card-icon">üé•</div>
          <h3 class="page-card-title">Vid√©os</h3>
          <p class="page-card-description">D√©couvrez notre s√©lection de vid√©os documentaires et reportages sur l'histoire de l'aviation et ses innovations.</p>
          <div class="page-card-footer">
            <span class="page-card-count">50+ vid√©os</span>
            <span class="page-card-arrow">‚Üí</span>
          </div>
        </a>

        <!-- Carte Podcasts -->
        <a href="Page n¬∞4.html" class="page-card" style="text-decoration: none;">
          <div class="page-card-icon">üéôÔ∏è</div>
          <h3 class="page-card-title">Podcasts</h3>
          <p class="page-card-description">√âcoutez nos √©missions d√©di√©es √† l'a√©ronautique, avec des experts et passionn√©s qui partagent leurs connaissances.</p>
          <div class="page-card-footer">
            <span class="page-card-count">30+ √©pisodes</span>
            <span class="page-card-arrow">‚Üí</span>
          </div>
        </a>

        <!-- Carte Liens -->
        <a href="Page n¬∞6.html" class="page-card" style="text-decoration: none;">
          <div class="page-card-icon">üîó</div>
          <h3 class="page-card-title">Liens Utiles</h3>
          <p class="page-card-description">Acc√©dez √† notre s√©lection de ressources externes, sites sp√©cialis√©s et r√©f√©rences incontournables de l'aviation.</p>
          <div class="page-card-footer">
            <span class="page-card-count">Ressources</span>
            <span class="page-card-arrow">‚Üí</span>
          </div>
        </a>
      </div>
    </section>

  </main>

  <!-- Script pour le th√®me et le menu -->
  <script>
   // ============================================
// GESTION DES ARTICLES AVEC LIGHTBOX ET T√âL√âCHARGEMENT
// ============================================

// ===== NOTATION PAR √âTOILES =====
document.querySelectorAll('.rating').forEach(ratingDiv => {
  let selectedValue = 0;
  const stars = ratingDiv.querySelectorAll('span');

  stars.forEach(star => {
    star.addEventListener('mouseenter', () => {
      const val = parseInt(star.getAttribute('data-value'));
      stars.forEach(s => {
        if (parseInt(s.getAttribute('data-value')) <= val) {
          s.style.color = '#f5b301';
          s.style.transform = 'scale(1.2)';
        } else {
          s.style.color = '#ccc';
          s.style.transform = 'scale(1)';
        }
      });
    });

    star.addEventListener('mouseleave', () => {
      stars.forEach(s => {
        if (parseInt(s.getAttribute('data-value')) <= selectedValue) {
          s.style.color = '#f5b301';
          s.style.transform = 'scale(1)';
        } else {
          s.style.color = '#ccc';
          s.style.transform = 'scale(1)';
        }
      });
    });

    star.addEventListener('click', () => {
      selectedValue = parseInt(star.getAttribute('data-value'));
      stars.forEach(s => {
        if (parseInt(s.getAttribute('data-value')) <= selectedValue) {
          s.classList.add('selected');
          s.style.color = '#f5b301';
          s.style.transform = 'scale(1)';
        } else {
          s.classList.remove('selected');
          s.style.color = '#ccc';
          s.style.transform = 'scale(1)';
        }
      });
      console.log('Note s√©lectionn√©e:', selectedValue);
    });
  });

  ratingDiv.addEventListener('mouseleave', () => {
    stars.forEach(s => {
      if (parseInt(s.getAttribute('data-value')) <= selectedValue) {
        s.style.color = '#f5b301';
        s.style.transform = 'scale(1)';
      } else {
        s.style.color = '#ccc';
        s.style.transform = 'scale(1)';
      }
    });
  });
});

// ===== TH√àME ET SIDEBAR =====
const toggleButton = document.getElementById('toggle-theme');
const sidebarToggleBtn = document.getElementById('toggle-sidebar');
const sidebar = document.querySelector('.sidebar');
const body = document.body;

if (localStorage.getItem('theme') === 'dark') {
  body.classList.add('dark');
  toggleButton.textContent = '‚òÄÔ∏è Mode Clair';
}

toggleButton.addEventListener('click', () => {
  body.classList.toggle('dark');
  const isDark = body.classList.contains('dark');
  toggleButton.textContent = isDark ? '‚òÄÔ∏è Mode Clair' : 'üåô Mode Sombre';
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
});

sidebarToggleBtn.addEventListener('click', () => {
  sidebar.classList.toggle('collapsed');
  body.classList.toggle('menu-collapsed');
});

// ===== GESTION DES ARTICLES =====
const readMoreButtons = document.querySelectorAll('.read-more');
const fullArticle = document.getElementById('full-article');
const articleGrid = document.querySelector('.grid-articles') || document.getElementById('article-grid');

readMoreButtons.forEach(btn => {
  btn.addEventListener('click', function (e) {
    e.preventDefault();

    const articleId = this.dataset.articleId;
    const template = document.getElementById(`article-${articleId}`);
    const title = this.closest('.card').querySelector('h3').textContent;
    const date = this.closest('.card').querySelector('.date').textContent;

    if (!template) {
      console.error(`Template "article-${articleId}" introuvable !`);
      alert('Article non disponible');
      return;
    }

    // Afficher l'article complet
    fullArticle.innerHTML = `
      <!-- Barre de progression -->
      <div class="reading-progress">
        <div class="reading-progress-bar" id="progress-bar"></div>
      </div>
      
      <!-- Table des mati√®res -->
      <div class="article-toc" id="article-toc">
        <h4>üìë Sommaire</h4>
        <ul id="toc-list"></ul>
      </div>
      
      <div class="card" style="max-width: 1200px; margin: 0 auto;">
        <div class="card-content" style="padding: 3rem;">
          <h1>${title}</h1>
          <p class="preview-date" style="color: var(--text-gray); margin-bottom: 2rem; font-size: 1rem;">
            ${date}
          </p>
          
          <!-- Boutons d'action -->
          <div class="article-actions">
            <button class="download-article-btn" id="download-pdf">
              T√©l√©charger en PDF
            </button>
            <button class="share-article-btn" id="share-article">
              Partager l'article
            </button>
          </div>
          
          <div id="article-content">
            ${template.innerHTML}
          </div>
          
          <button id="close-article" class="btn" style="margin-top: 3rem; background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);">
            ‚Üê Retour aux articles
          </button>
        </div>
      </div>
    `;

    fullArticle.style.display = 'block';
    if (articleGrid) articleGrid.style.display = 'none';
    window.scrollTo({ top: 0, behavior: 'smooth' });

    // Initialiser les fonctionnalit√©s
    initReadingProgress();
    initTableOfContents();
    initLightbox();
    initDownloadPDF(title, articleId);
    initShareArticle(title);

    // Bouton retour
    document.getElementById('close-article').addEventListener('click', () => {
      fullArticle.style.display = 'none';
      fullArticle.innerHTML = '';
      if (articleGrid) articleGrid.style.display = 'grid';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });
});

// ===== BARRE DE PROGRESSION =====
function initReadingProgress() {
  const progressBar = document.getElementById('progress-bar');
  const articleContent = document.getElementById('article-content');
  
  if (!progressBar || !articleContent) return;

  window.addEventListener('scroll', () => {
    const articleTop = articleContent.offsetTop;
    const articleHeight = articleContent.offsetHeight;
    const scrollTop = window.pageYOffset;
    const windowHeight = window.innerHeight;
    
    const scrolled = scrollTop - articleTop + windowHeight;
    const total = articleHeight;
    const percentage = Math.min(Math.max((scrolled / total) * 100, 0), 100);
    
    progressBar.style.width = percentage + '%';
  });
}

// ===== TABLE DES MATI√àRES =====
function initTableOfContents() {
  const toc = document.getElementById('article-toc');
  const tocList = document.getElementById('toc-list');
  const articleContent = document.getElementById('article-content');
  
  if (!toc || !tocList || !articleContent) return;

  // R√©cup√©rer tous les titres
  const headings = articleContent.querySelectorAll('.preview-theme, .preview-section-title');
  
  if (headings.length === 0) return;

  // Afficher le sommaire
  toc.classList.add('show');

  // G√©n√©rer la table des mati√®res
  headings.forEach((heading, index) => {
    const id = `heading-${index}`;
    heading.id = id;
    
    const li = document.createElement('li');
    const a = document.createElement('a');
    a.href = `#${id}`;
    a.textContent = heading.textContent;
    a.addEventListener('click', (e) => {
      e.preventDefault();
      heading.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
    
    li.appendChild(a);
    tocList.appendChild(li);
  });

  // Surligner la section active
  window.addEventListener('scroll', () => {
    let current = '';
    headings.forEach(heading => {
      const sectionTop = heading.offsetTop;
      if (window.pageYOffset >= sectionTop - 100) {
        current = heading.id;
      }
    });

    tocList.querySelectorAll('a').forEach(a => {
      a.classList.remove('active');
      if (a.getAttribute('href') === `#${current}`) {
        a.classList.add('active');
      }
    });
  });
}

// ===== LIGHTBOX AM√âLIOR√âE =====
function initLightbox() {
  const galleryItems = document.querySelectorAll('.gallery-item');
  
  if (galleryItems.length === 0) return;

  let currentIndex = 0;
  const images = Array.from(galleryItems).map(item => ({
    src: item.querySelector('img').src,
    caption: item.dataset.caption || item.querySelector('.gallery-caption')?.textContent || ''
  }));

  // Cr√©er la lightbox
  const lightbox = document.createElement('div');
  lightbox.className = 'lightbox';
  lightbox.id = 'lightbox';
  lightbox.innerHTML = `
    <button class="lightbox-nav lightbox-prev" id="lightbox-prev">‚Äπ</button>
    <button class="lightbox-nav lightbox-next" id="lightbox-next">‚Ä∫</button>
    
    <div class="lightbox-toolbar">
      <button class="lightbox-btn lightbox-download" id="lightbox-download" title="T√©l√©charger">
        ‚¨á
      </button>
      <button class="lightbox-btn lightbox-close" id="lightbox-close" title="Fermer">
        √ó
      </button>
    </div>
    
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="">
    </div>
    
    <div class="lightbox-caption">
      <div class="lightbox-counter" id="lightbox-counter"></div>
      <div id="lightbox-caption-text"></div>
    </div>
  `;
  
  document.body.appendChild(lightbox);

  // Elements
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxClose = document.getElementById('lightbox-close');
  const lightboxPrev = document.getElementById('lightbox-prev');
  const lightboxNext = document.getElementById('lightbox-next');
  const lightboxDownload = document.getElementById('lightbox-download');
  const lightboxCounter = document.getElementById('lightbox-counter');
  const lightboxCaptionText = document.getElementById('lightbox-caption-text');

  // Fonction pour afficher une image
  function showImage(index) {
    currentIndex = index;
    const image = images[index];
    
    lightboxImg.src = image.src;
    lightboxCaptionText.textContent = image.caption;
    lightboxCounter.textContent = `${index + 1} / ${images.length}`;
    
    lightboxPrev.disabled = index === 0;
    lightboxNext.disabled = index === images.length - 1;
    
    lightbox.classList.add('show');
    document.body.style.overflow = 'hidden';
  }

  // Fermer la lightbox
  function closeLightbox() {
    lightbox.classList.remove('show');
    document.body.style.overflow = '';
  }

  // Event listeners sur les vignettes
  galleryItems.forEach((item, index) => {
    item.addEventListener('click', () => showImage(index));
  });

  // Navigation
  lightboxPrev.addEventListener('click', () => {
    if (currentIndex > 0) showImage(currentIndex - 1);
  });

  lightboxNext.addEventListener('click', () => {
    if (currentIndex < images.length - 1) showImage(currentIndex + 1);
  });

  // T√©l√©charger
  lightboxDownload.addEventListener('click', () => {
    const link = document.createElement('a');
    link.href = lightboxImg.src;
    link.download = `image-${currentIndex + 1}.jpg`;
    link.click();
  });

  // Fermer
  lightboxClose.addEventListener('click', closeLightbox);
  
  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  // Clavier
  document.addEventListener('keydown', (e) => {
    if (!lightbox.classList.contains('show')) return;
    
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowLeft' && currentIndex > 0) showImage(currentIndex - 1);
    if (e.key === 'ArrowRight' && currentIndex < images.length - 1) showImage(currentIndex + 1);
  });
}

// ===== T√âL√âCHARGEMENT PDF =====
function initDownloadPDF(title, articleId) {
  const downloadBtn = document.getElementById('download-pdf');
  
  if (!downloadBtn) return;

  downloadBtn.addEventListener('click', () => {
    const articleContent = document.getElementById('article-content');
    
    if (!articleContent) {
      alert('Impossible de t√©l√©charger l\'article');
      return;
    }

    // Cr√©er un contenu propre pour le PDF
    const content = `
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>${title}</title>
  <style>
    body {
      font-family: Georgia, serif;
      line-height: 1.8;
      max-width: 800px;
      margin: 0 auto;
      padding: 40px;
      color: #333;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: #0A2463;
    }
    h2 {
      font-size: 1.75rem;
      margin-top: 2rem;
      color: #0A2463;
      border-bottom: 2px solid #eee;
      padding-bottom: 0.5rem;
    }
    h3 {
      font-size: 1.375rem;
      margin-top: 1.5rem;
      color: #0A2463;
    }
    p {
      margin-bottom: 1rem;
      text-align: justify;
    }
    .preview-resume {
      background: #FEF3C7;
      padding: 1.5rem;
      border-left: 4px solid #FB8500;
      margin: 2rem 0;
      font-weight: 600;
    }
    .preview-date {
      color: #666;
      margin-bottom: 2rem;
    }
    img {
      max-width: 100%;
      height: auto;
      margin: 1rem 0;
    }
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin: 2rem 0;
    }
  </style>
</head>
<body>
  <h1>${title}</h1>
  ${articleContent.innerHTML}
  <hr style="margin-top: 3rem; border: none; border-top: 2px solid #eee;">
  <p style="text-align: center; color: #999; font-size: 0.9rem;">
    Document g√©n√©r√© depuis L'Air du vol¬Æ - ${new Date().toLocaleDateString('fr-FR')}
  </p>
</body>
</html>
    `;

    // Cr√©er un Blob et t√©l√©charger
    const blob = new Blob([content], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `${title.replace(/[^a-z0-9]/gi, '_')}.html`;
    link.click();
    URL.revokeObjectURL(url);

    // Notification
    alert('‚úÖ Article t√©l√©charg√© ! Vous pouvez l\'ouvrir dans votre navigateur ou le convertir en PDF.');
  });
}

// ===== PARTAGE D'ARTICLE =====
function initShareArticle(title) {
  const shareBtn = document.getElementById('share-article');
  
  if (!shareBtn) return;

  shareBtn.addEventListener('click', async () => {
    const url = window.location.href;
    const text = `D√©couvrez l'article "${title}" sur L'Air du vol¬Æ`;

    if (navigator.share) {
      try {
        await navigator.share({ title, text, url });
      } catch (err) {
        console.log('Partage annul√©');
      }
    } else {
      // Fallback: copier le lien
      navigator.clipboard.writeText(url).then(() => {
        alert('üîó Lien copi√© dans le presse-papiers !');
      });
    }
  });
}

// ===== RECHERCHE D'ARTICLES =====
const searchInput = document.getElementById('articleSearch');
const articles = document.querySelectorAll('.grid-articles .card, #article-grid .card');

if (searchInput && articles.length > 0) {
  searchInput.addEventListener('input', () => {
    const query = searchInput.value.toLowerCase();

    articles.forEach(card => {
      const title = card.querySelector('h3')?.textContent.toLowerCase() || '';
      const description = card.querySelector('p')?.textContent.toLowerCase() || '';

      if (title.includes(query) || description.includes(query)) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  });
}
 </script>

  <footer class="footer">
    <div class="footer-content" id="section1">
      <h3>Conditions G√©n√©rales d‚ÄôUtilisation</h3>
      <p>En acc√©dant au site <strong>L'Air du vol</strong>, vous acceptez nos conditions g√©n√©rales d'utilisation. Toute reproduction ou diffusion du contenu est interdite sans autorisation.</p>
      <p>&copy; 2025 - L'Air du vol. Tous droits r√©serv√©s.</p>
    </div>
<!-- Bouton flottant -->
<button id="ai-chat-btn">‚ùî</button>

<!-- Fen√™tre de chat -->
<div id="ai-chat-modal">
  <div class="ai-chat-header">
    <h3>Assistant IA</h3>
    <button id="close-ai-chat">&times;</button>
  </div>
  <div class="ai-chat-messages" id="ai-chat-messages"></div>
  <div class="typing-indicator" id="typing-indicator">
    <div class="typing-dots"><span></span><span></span><span></span></div>
  </div>
  <div class="ai-chat-input">
    <textarea id="ai-input" placeholder="√âcrivez votre message..."></textarea>
    <button id="ai-send-btn">Envoyer</button>
  </div>
</div>
  <script>    
const aiBtn = document.getElementById("ai-chat-btn");
const aiModal = document.getElementById("ai-chat-modal");
const aiClose = document.getElementById("close-ai-chat");
const aiMessages = document.querySelector(".ai-chat-messages");
const aiInput = document.getElementById("ai-input");
const aiSend = document.getElementById("ai-send-btn");

// OUVERTURE / FERMETURE DU CHAT
aiBtn.addEventListener("click", () => aiModal.classList.add("show"));
aiClose.addEventListener("click", () => aiModal.classList.remove("show"));

// ENVOI D'UN MESSAGE
aiSend.addEventListener("click", sendMessage);
aiInput.addEventListener("keydown", e => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

async function sendMessage() {
  const text = aiInput.value.trim();
  if (!text) return;

  // Ajouter message utilisateur
  addMessage(text, "user");
  aiInput.value = "";
  aiSend.disabled = true;

  // Indicateur de chargement
  const loading = addMessage("‚Ä¢ ‚Ä¢ ‚Ä¢", "ai");
  loading.classList.add("typing-indicator");

  // APPEL API IA
  const response = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer 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"
    },
    body: JSON.stringify({
      model: "gpt-4o-mini",
      messages: [{ role: "user", content: text }]
    })
  });

  const data = await response.json();

  // Supprimer l'indicateur
  loading.remove();

  // Afficher r√©ponse IA
  addMessage(data.choices[0].message.content, "ai");
  aiSend.disabled = false;
}

// AJOUTER UN MESSAGE DANS L‚ÄôUI
function addMessage(content, sender) {
  const div = document.createElement("div");
  div.className = "ai-message " + sender;
  div.textContent = content;
  aiMessages.appendChild(div);
  aiMessages.scrollTop = aiMessages.scrollHeight;
  return div;
}

  aiInput.addEventListener("keypress", e => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault();
      sendBtn.click();
    }
  });
      // ========================================
    // SYST√àME DE TUTORIEL
    // ========================================
    let currentTutorialStep = 1;

    function nextTutorialStep() {
      if (currentTutorialStep < 3) {
        document.querySelector(`[data-step="${currentTutorialStep}"]`).classList.remove('active');
        currentTutorialStep++;
        document.querySelector(`[data-step="${currentTutorialStep}"]`).classList.add('active');
      }
    }

    function prevTutorialStep() {
      if (currentTutorialStep > 1) {
        document.querySelector(`[data-step="${currentTutorialStep}"]`).classList.remove('active');
        currentTutorialStep--;
        document.querySelector(`[data-step="${currentTutorialStep}"]`).classList.add('active');
      }
    }

    function skipTutorial() {
      document.getElementById('tutorial-overlay').classList.add('hidden');
      localStorage.setItem('tutorialCompleted', 'true');
    }

    function finishTutorial() {
      skipTutorial();
    }

    function showTutorial() {
      document.getElementById('tutorial-overlay').classList.remove('hidden');
      currentTutorialStep = 1;
      document.querySelectorAll('.tutorial-step').forEach(step => step.classList.remove('active'));
      document.querySelector('[data-step="1"]').classList.add('active');
    }

    // Afficher le tutoriel uniquement √† la premi√®re visite
    window.addEventListener('DOMContentLoaded', () => {
      if (!localStorage.getItem('tutorialCompleted')) {
        // Le tutoriel s'affiche automatiquement
      } else {
        document.getElementById('tutorial-overlay').classList.add('hidden');
      }
    });
</script>
<!-- Fen√™tre Newsletter -->
<div id="newsletter-modal">
  <div class="newsletter-content">
    <span id="close-newsletter">&times;</span>
    <h2>üì© Abonnez-vous √† notre newsletter !</h2>
    <p>Recevez nos derniers articles et actualit√©s directement par mail.</p>
    <form id="newsletter-form">
      <input type="email" id="newsletter-email" placeholder="Votre email" required>
      <button type="submit">S'abonner</button>
    </form>
  </div>
</div>
<script>
  // Afficher la modale newsletter au chargement
  window.addEventListener('load', () => {
    document.getElementById('newsletter-modal').classList.add('show');
  });

  // Bouton fermer
  document.getElementById('close-newsletter').addEventListener('click', () => {
    document.getElementById('newsletter-modal').classList.remove('show');
  });

  // Gestion du formulaire (√† adapter avec ton back-end ou service d‚Äôenvoi)
  document.getElementById('newsletter-form').addEventListener('submit', e => {
    e.preventDefault();
    const email = document.getElementById('newsletter-email').value.trim();
    if (email) {
      alert('Merci pour votre abonnement : ' + email);
      document.getElementById('newsletter-modal').classList.remove('show');
      // ici tu peux faire un fetch() ou AJAX vers ton serveur pour enregistrer l‚Äôemail
    }
  });
  

</script>
<script>
// ============================================
// SYST√àME DE GESTION DES COOKIES ET PUBLICIT√âS
// ============================================

(function() {
  'use strict';
  
  // Configuration
  const CONFIG = {
    STORAGE_KEYS: {
      ADS_ACCEPTED: 'adsAccepted',
      USER_DATA: 'userData',
      LAST_INTERSTITIAL: 'lastInterstitial'
    },
    INTERSTITIAL_DELAY: 30000, // 30 secondes entre chaque pub interstitielle
    AD_CLOSE_DELAY: 5 // 5 secondes avant de pouvoir fermer
  };
  
  // Elements DOM
  const elements = {
    overlay: document.getElementById('cookie-overlay'),
    accountModal: document.getElementById('account-modal'),
    loginModal: document.getElementById('login-modal'),
    acceptBtn: document.getElementById('accept-ads-btn'),
    refuseBtn: document.getElementById('refuse-ads-btn'),
    accountForm: document.getElementById('account-form'),
    loginForm: document.getElementById('login-form'),
    showLoginBtn: document.getElementById('show-login-btn'),
    showSignupBtn: document.getElementById('show-signup-btn'),
    closeAccountModal: document.getElementById('close-account-modal'),
    closeLoginModal: document.getElementById('close-login-modal')
  };
  
  // Base de donn√©es utilisateurs (localStorage)
  class UserDatabase {
    static getUsers() {
      return JSON.parse(localStorage.getItem('users') || '[]');
    }
    
    static saveUser(user) {
      const users = this.getUsers();
      users.push(user);
      localStorage.setItem('users', JSON.stringify(users));
    }
    
    static findUser(email, password) {
      const users = this.getUsers();
      return users.find(u => u.email === email && u.password === password);
    }
    
    static userExists(email) {
      const users = this.getUsers();
      return users.some(u => u.email === email);
    }
  }

  // Gestion des publicit√©s
  class AdManager {
    static hideAllAds() {
      // Masquer toutes les pubs
      document.querySelectorAll('.topbar-ads, .ad-card, .sidebar-ad, .pub-container').forEach(ad => {
        ad.style.display = 'none';
      });
      
      // Ajouter une classe au body pour indiquer qu'il n'y a pas de pubs
      document.body.classList.add('no-ads');
    }
    
    static showAllAds() {
      document.querySelectorAll('.topbar-ads, .ad-card, .sidebar-ad, .pub-container').forEach(ad => {
        ad.style.display = '';
      });
      
      document.body.classList.remove('no-ads');
    }
    
    static createInterstitialAd() {
      const ads = [
        {
          img: 'https://www.picard.fr/on/demandware.static/-/Sites-picard-Library/default/dw53e8a5b3/brandcontent/1464x270px_BANNIERE_HEADER_SNACK_MOBILE.jpg',
          title: 'Picard - Les snacks surgel√©s',
          link: 'https://www.picard.fr'
        },
        {
          img: 'https://www.vivelapub.fr/wp-content/uploads/miniatures/apple3.jpg',
          title: 'Apple - iPhone 16 Pro',
          link: 'https://www.apple.com'
        },
        {
          img: 'https://www.lundimatin.fr/wp-content/uploads/2023/03/a-propos-fedex.png',
          title: 'FedEx - Livraison express',
          link: 'https://www.fedex.com'
        }
      ];
      
      const ad = ads[Math.floor(Math.random() * ads.length)];
      
      const interstitial = document.createElement('div');
      interstitial.className = 'interstitial-ad';
      interstitial.innerHTML = `
        <div class="interstitial-content">
          <div class="ad-timer" id="ad-timer">Fermeture dans <span id="timer-count">${CONFIG.AD_CLOSE_DELAY}</span>s</div>
          <button class="ad-close-btn" id="ad-close" disabled>&times;</button>
          <a href="${ad.link}" target="_blank">
            <img src="${ad.img}" alt="${ad.title}">
            <h2>${ad.title}</h2>
          </a>
        </div>
      `;
      
      document.body.appendChild(interstitial);
      
      // Timer pour activer le bouton de fermeture
      let timeLeft = CONFIG.AD_CLOSE_DELAY;
      const timerElement = interstitial.querySelector('#timer-count');
      const closeBtn = interstitial.querySelector('#ad-close');
      
      const countdown = setInterval(() => {
        timeLeft--;
        timerElement.textContent = timeLeft;
        
        if (timeLeft <= 0) {
          clearInterval(countdown);
          closeBtn.disabled = false;
          closeBtn.classList.add('active');
          interstitial.querySelector('.ad-timer').textContent = 'Vous pouvez fermer la publicit√©';
        }
      }, 1000);
      
      closeBtn.addEventListener('click', () => {
        if (!closeBtn.disabled) {
          interstitial.remove();
          clearInterval(countdown);
        }
      });
      
      interstitial.classList.add('show');
      
      // Enregistrer l'heure de la derni√®re pub
      localStorage.setItem(CONFIG.STORAGE_KEYS.LAST_INTERSTITIAL, Date.now());
    }
    
    static shouldShowInterstitial() {
      const lastInterstitial = localStorage.getItem(CONFIG.STORAGE_KEYS.LAST_INTERSTITIAL);
      if (!lastInterstitial) return true;
      
      const timeSince = Date.now() - parseInt(lastInterstitial);
      return timeSince >= CONFIG.INTERSTITIAL_DELAY;
    }
    
    static startInterstitialLoop() {
      // Montrer une pub apr√®s 10 secondes, puis toutes les 30 secondes
      setTimeout(() => {
        if (this.shouldShowInterstitial()) {
          this.createInterstitialAd();
        }
        
        setInterval(() => {
          if (this.shouldShowInterstitial()) {
            this.createInterstitialAd();
          }
        }, CONFIG.INTERSTITIAL_DELAY);
      }, 10000);
    }
  }
  // D√©marrer
  init();
})();
</script>
  </body>
</html>
